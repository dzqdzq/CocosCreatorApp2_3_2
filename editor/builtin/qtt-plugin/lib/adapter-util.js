let e,r,a=require("path"),t=require("fs-extra"),i=require("./build-jsb-adapter.js"),n=Editor.url("packages://qtt-adapter"),o=!1,s="";module.exports={gatherInfo(t){e=t.cpk,o=t.isTinyPackage,s=t.customConfig.tinyPackageServer,r=a.join(t.buildPath,"jsb-adapter")},async organizeResources(e){let d=a.join(r,"engine","index.js");if(t.emptyDirSync(r),await i.build({isTinyPackage:o,rootPath:n,dstPath:r,excludedModules:[]}),o){if(""===s)return e.reply(new Error("please enter remote server root")),!1;var c=t.readFileSync(d,"utf8");c=c.replace("REMOTE_SERVER_ROOT_PLACE_HOLDER",s),t.writeFileSync(d,c)}return!0},pack(){e.directory(r,"jsb-adapter")}};